name: update readme doc

on:
  workflow_dispatch:
  
jobs:
  release:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 0
          
      - name: 'Get Previous tag'
        id: previoustag
        uses: "WyriHaximus/github-action-get-previous-tag@v1"
        
      - name: 'Get previous release tag'
        id: tag
        uses: "sammcoe/get-previous-release-action@v1"

      - name: replace version
        run: sed -i "s/${{steps.tag.outputs.tag}}/${{steps.previoustag.outputs.tag}}/g" README*.md

      - name: Create Pull Request
        id: cpr
        uses: peter-evans/create-pull-request@v4
        with:
          commit-message: Update report
          signoff: false
          branch: doc/${{steps.previoustag.outputs.tag}}
          base: main
          delete-branch: true
          title: 'doc: Update README files version'
          body: |
            **åœ¨æå‡ºæ­¤æ‹‰å–è¯·æ±‚æ—¶ï¼Œæˆ‘ç¡®è®¤äº†ä»¥ä¸‹å‡ ç‚¹ï¼ˆä¿å­˜åè¯·ç‚¹å‡»å¤é€‰æ¡†ï¼‰ï¼š**

            - [x] æ ‡é¢˜ä¸ºfixã€featæˆ–docå¼€å¤´
            - [x] æˆ‘å·²æ£€æŸ¥æ²¡æœ‰ä¸æ­¤è¯·æ±‚é‡å¤çš„æ‹‰å–è¯·æ±‚ã€‚
            - [x] æˆ‘å·²ç»è€ƒè™‘è¿‡ï¼Œå¹¶ç¡®è®¤è¿™ä»½å‘ˆä»¶å¯¹å…¶ä»–äººå¾ˆæœ‰ä»·å€¼ã€‚
            - [x] æˆ‘æ¥å—æ­¤æäº¤å¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ï¼Œå¹¶æ ¹æ®ç»´æŠ¤äººå‘˜çš„æ„æ„¿å…³é—­æ‹‰å–è¯·æ±‚ã€‚

            **å¡«å†™PRå†…å®¹ï¼š**
            Update README files version to latest tag by bot ğŸš€.
          draft: false
